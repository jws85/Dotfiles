---
- name: Install i3 via apt
  apt: name={{ item }}
  become: yes
  with_items:
    - i3
    - i3blocks
    - udiskie
    - autorandr
    - python3-jinja2  # for generating config

- name: Symlink i3 dotfiles
  shell: stow -d ~/Dotfiles -t ~ {{ item }}
  with_items:
    - i3
    - dunst

- name: Copy default config.json if needed
  copy: src=~/.config/i3/config.sample.json dest=~/.config/i3/config.json force=no

- name: Generate i3 config
  make:
    chdir: ~/.config/i3
    target: all

- name: Copy default wallpaper
  copy: src=nasa-53884.jpg dest=~/.wallpaper force=no

- name: Clone my helper scripts
  git:
    repo: https://github.com/jws85/scripts
    dest: ~/.local/source/scripts
    update: no

- name: Install helper scripts
  make:
    chdir: ~/.local/source/scripts
    target: install
    params:
      PREFIX: ~/.local
