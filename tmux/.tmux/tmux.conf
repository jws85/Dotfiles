# This requires tmux >= 1.7 (on Debian "wheezy" I built from git...)

# I've used C-o as prefix since I learned GNU screen
unbind C-b
set -g prefix C-o
bind C-o send-prefix

# Swap last recently used pane with Tab
unbind-key Tab
bind-key -r Tab last-pane
bind-key -r Space last-window

# C-o m -- Mark pane
bind-key -r m select-pane -m

# C-o Space -- Swap window

# Vim keys are nice, use them for pane management
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# swap-pane -L/R do not seem to work either...
#bind-key C-h swap-pane -L
bind-key C-j swap-pane -D
bind-key C-k swap-pane -U
#bind-key C-l swap-pane -R

# Ditto with arrow keys
bind-key Left select-pane -L
bind-key Down select-pane -D
bind-key Up select-pane -U
bind-key Right select-pane -R

bind-key S-Left resize-pane -L 5
bind-key S-Down resize-pane -D 5
bind-key S-Up resize-pane -U 5
bind-key S-Right resize-pane -R 5

# These do not work for whatever reason
#bind-key C-Left swap-pane -L
#bind-key C-Down swap-pane -D
#bind-key C-Up swap-pane -U
#bind-key C-Right swap-pane -R

# Reload tmux config
bind-key R source-file ~/.tmux.conf \; display-message "Config reloaded..."

# C-o @ -- Allows to join specified window to a pane in the current one
bind-key @ command-prompt -p "create pane from:" "join-pane -s ':%%'"

# C-o S -- Allows to swap the current window with the specified one
bind-key S command-prompt -p "swap window with:" "swap-window -t '%%'"

# C-o A -- Rename window (default binding is ","; I am too used to screen)
bind-key A command-prompt -I "#W" -p "rename window to:" "rename-window '%%'"

# C-o # -- Renumber/move window (default binding is "."; "#" is more mnenomic)
bind-key "#" command-prompt -I "#I" -p "move window to:" "move-window -t '%%'"

# C-o - -- Split window vertically
bind-key - split-window

# C-o | -- Split window horizontally
bind-key | split-window -h
bind-key \\ split-window -h

# More ergonomic copy-mode bindings
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# Copy text to the Linux system clipboard; must install xsel first!
# Note that if you want to just copy and paste within tmux, using Enter
# to copy works; as does M-w.  Then you can paste using C-o (or whatever
# prefix you use) then "]"
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xsel -i --clipboard"

# Sets the default shell to your preferred one
set-option -g default-shell $SHELL

# I like having 256 colors
set -g default-terminal "screen-256color"

# and a nice long history
set -g history-limit 10000

# I don't need a clock; dwm provides a nice one
set -g status-right ""

# More reasonable to have first window be first number button
set -g base-index 1

# Set status bar color to white on a dark grey, almost black
set -g status-bg default
set -g status-fg white

set -g window-status-format "#I:#W"

set -g @theme-status-fg white
set -g @theme-window-status-current-fg white
set -g @theme-status-bg default
set -g @theme-status-left-bg default
set -g @theme-status-right-bg default
source-file "${HOME}/.tmux/basic.tmuxtheme"
